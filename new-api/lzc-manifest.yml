lzc-sdk-version: '0.1'
name: New API
package: cloud.lazycat.app.new-api
version: 0.10.8+1.2.2
description: >-
  AIæ¨¡å‹èšåˆç®¡ç†ä¸­è½¬åˆ†å‘ç³»ç»Ÿï¼Œä¸€ä¸ªåº”ç”¨ç®¡ç†æ‚¨çš„æ‰€æœ‰AIæ¨¡å‹ï¼Œæ”¯æŒå°†å¤šç§å¤§æ¨¡å‹è½¬ä¸ºç»Ÿä¸€æ ¼å¼è°ƒç”¨ï¼Œæ”¯æŒOpenAIã€Claudeã€Geminiç­‰æ ¼å¼ï¼Œå¯ä¾›ä¸ªäººæˆ–è€…ä¼ä¸šå†…éƒ¨ç®¡ç†ä¸åˆ†å‘æ¸ é“ä½¿ç”¨ã€‚
author: Calcium-Ion
homepage: https://github.com/QuantumNous/new-api
license: New-API-License
locales:
  zh:
    name: New API
    description: ğŸ¥ ä¸‹ä¸€ä»£LLMç½‘å…³å’ŒAIèµ„äº§ç®¡ç†ç³»ç»Ÿ
  en:
    name: New API
    description: ğŸ¥ Next-Generation LLM Gateway and AI Asset Management System
application:
  public_path:
    - /
    - !/console
    - !/login
  routes:
    - /=http://new-api:3000
  subdomain: new-api
  health_check:
    test_url: http://new-api:3000/api/status
services:
  new-api:
    image: registry.lazycat.cloud/hexg/calciumion/new-api:bc2ce40dcafd30a8
    command: '--log-dir /app/logs'
    binds:
      - /lzcapp/var/data:/data
      - /lzcapp/var/logs:/app/logs
    environment:
      - SQL_DSN=postgresql://root:123456@postgres.cloud.lazycat.app.new-api.lzcapp:5432/new-api
      - REDIS_CONN_STRING=redis://redis.cloud.lazycat.app.new-api.lzcapp:6379
      - TZ=Asia/Shanghai
      - ERROR_LOG_ENABLED=true
      - BATCH_UPDATE_ENABLED=true
      - FRONTEND_BASE_URL=${LAZYCAT_APP_DOMAIN}
    depends_on:
      - redis
      - postgres
    healthcheck:
      test: ["CMD-SHELL", "wget -q -O - http://localhost:3000/api/status | grep -o '\"success\":\\s*true' || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3

  redis:
    image: registry.lazycat.cloud/hexg/library/redis:09957f31da3c43c7
    restart: always
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 5s
      timeout: 5s
      retries: 5

  postgres:
    image: registry.lazycat.cloud/hexg/library/postgres:6cf0e1b09d8b2b1a
    restart: always
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U root -d new-api"]
      interval: 5s
      timeout: 5s
      retries: 10
    binds:
      - /lzcapp/var/pg_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_USER=root
      - POSTGRES_PASSWORD=123456
      - POSTGRES_DB=new-api